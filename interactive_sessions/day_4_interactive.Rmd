---
title: "Day 4 Interactive Session Materials"
subtitle: "Functions - introduction, basics, examples"
output: 
  html_document:
    css: comp_session_theme.css
    toc: true
    toc_float: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(reticulate)
library(palmerpenguins)
```

## Part 1: Basic pieces of a function



## Part 2: Getting started - function examples in R & Python

#### Example 1

Make a function called `double_it` that doubles any value input value. 

In R: 

```{r}
# Create the function: 
double_it <- function (x) {
  2 * x
}

# Try it out! 
double_it(24) 

# And on a vector, still works: 
double_it(c(1, 0.5, -200))
```

In Python: 

```{r}

```

#### Example 2

Write a function that returns the statement "I am ___ years old!", where the blank is entered by the user as argument `age`. 

In R: 
```{r}
my_age <- function(age) {
  print(paste("I am", age, "years old!"))
}

my_age(age = 10)
```

In Python: 

```{python}

```

## Part 3: Functions with conditionals

Similar to for loops, we can have conditionals within functions - this means that *what* the function does with arguments will change based on what those argument values are. 

#### Example

Returning to an example that we saw previously, let's say we want to make a function that returns the age of an animal in animal years, given the species and age in human years. For example: 1 human year = 7 dog years, and 1 human year = 4.7 goat years. 

Write a function with two arguments: `animal` and `age`, which converts the animal's age from human to animal years. 

In R: 

```{r}
animal_age <- function(animal, age) {
  if (animal == "dog") {
    print(age * 7)
  } else if (animal == "goat") {
    print(age * 4.7)
  } else {
    print("Please enter 'dog' or 'goat'.")
  }
}

# Try a cow.
animal_age(animal = "cow", age = 12)

# Try an 8 year old dog.
animal_age(animal = "dog", age = 8)

```

**A question to keep in mind:** it's easy enough to manually code in the animal species and conversion factor since we only have two animals. Would we want to manually write this out if we had 20 species? 50 species? 

#### Example

Let's say we have a table of the dogs' favorite foods. 

```{r, echo = FALSE}
dog_choice <- tribble(
  ~dog_name, ~food,
  "Khora", "everything",
  "Teddy", "salmon",
  "Waffle", "pancakes",
  "Banjo", "chicken"
)

dog_choice
```

Write a function that only requires the dog name as an input, then automatically pulls information from the data frame (stored as `dog_choice`) to return the phrase "My name is _____ and I love eating ____!"

Here I'll introduce a new function: `dplyr::filter()`. This is a fantastic function for creating subsets from our data. We're going to be using it a *LOT* in our data wrangling lessons last week. For now, know that it returns a logical TRUE or FALSE based on whether or not elements in a vector satisfy the conditions. 

Let's talk through what this code is actually doing: 

```{r}
dog_menu <- function(name) {
  my_sub <- dplyr::filter(dog_choice, dog_name == name)
  print(paste("My name is", my_sub$dog_name, "and my favorite food is", my_sub$food))
}

# Try it! What is Waffle's favorite food?
dog_menu(name = "Waffle")

# And Khora? 
dog_menu(name = "Khora")
```
Aha - now we can see that we don't have to write out every value in our function! We can pull elements directly from a table to switch parameters based on user selection / inputs!

### A function with `switch()`

Wait, shouldn't we also be able to use `switch` to switch between the different parameter values, based on a user input? Yep! Let's see what that can look like. 

## Part 3: Functions meet for loops

Sometimes, we'll want to iterate over different elements of a data structure (e.g. data frame columns), applying a function we write to each of them. We've learned a couple of coder-friendly tools to loop over columns (e.g. `apply`, `purrr::map()`), but let's write one from scratch first. 

#### Example

Write a function that iterates over each column in a data frame (name gets specified), calculating the mean value for each and returning the phrase "The mean value of (column name) is _____." 

Note: the `colnames()` function in base R returns column names. 

```{r}
df_means <- function(df) {
  for (i in 1:ncol(df)) {
    col_mean <- mean(df[[i]])
    column_name <- colnames(df[i])
    print(paste("The mean value of", column_name, "is", col_mean))
  }
}

df_means(df = mtcars)
```

**Question:** Why only the single square brackets to refer to the column names here? Try it! What is returned when we use `colnames(mtcars[2])` versus `colnames(mtcars[[2]])`?

So, will this actually work on other data frames? Let's make one! 

```{r}
the_fish <- tribble(
  ~brown, ~rainbow, ~cutthroat,
  16.2, 12.1, 21.9,
  24.7, 14.6, 18.3,
  12.1, 15.4, 30.2,
  10.4, 11.8, 26.3
)

df_means(df = the_fish)
```
#### Another example

